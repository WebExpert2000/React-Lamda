(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t){},112:function(e,t){},221:function(e,t,a){e.exports=a(560)},226:function(e,t,a){},232:function(e,t,a){},265:function(e,t,a){},522:function(e,t,a){},523:function(e,t,a){},524:function(e,t,a){},541:function(e,t,a){},542:function(e,t,a){},543:function(e,t,a){},560:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(40),r=a.n(l),c=(a(226),a(11)),o=a.n(c),i=a(15),u=a(19),h=a(20),m=a(22),p=a(21),g=a(23),d=a(69),f=a(208),E=a(570),b=a(568),v=a(569),C=a(71),y=a(207),w=a(87),S=a(117),x=a(562),N=a(571),k=a(563),L=a(44),O=(a(232),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={search:"",searchNotes:[],allNotes:[]},a.onChange=function(e){var t=a.state.allNotes.filter(function(t){if(t.sequence.search(new RegExp(e.target.value,"i"))>=0)return!0});a.setState({search:e.target.value,searchNotes:t})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.isAuthenticated){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.props.context.getNotes();case 4:t=e.sent,this.setState({allNotes:t,searchNotes:t});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderNotesList",value:function(e){var t=[];e.filter(function(e){return t.findIndex(function(t){return t.sequence===e.sequence})<=-1&&t.push(e),null});var a=t.map(function(e,t){return s.a.createElement(L.LinkContainer,{key:t,to:"/sequences/".concat(e.sequence)},s.a.createElement(S.a,{header:e.sequence.trim().split("\n")[0]},"Created: "+new Date(e.createdAt).toLocaleString()+" By"))});return s.a.createElement(s.a.Fragment,null,s.a.createElement(L.LinkContainer,{key:"new",to:"/notes/new"},s.a.createElement(S.a,null,s.a.createElement("h4",null,s.a.createElement("b",null,"\uff0b")," Create a new sequence"))),a)}},{key:"renderLander",value:function(){return s.a.createElement("div",{className:"lander"},s.a.createElement("h1",null,"UTell"),s.a.createElement("p",null,"Easy Knowledge Sharing!"))}},{key:"renderNotes",value:function(){return s.a.createElement("div",{className:"notes"},s.a.createElement(x.a,null,"Your Sequences"),this.props.context.loading?s.a.createElement("p",null,"Loading..."):s.a.createElement(s.a.Fragment,null,s.a.createElement(N.a,{onChange:this.onChange,value:this.state.search,componentClass:"input",placeholder:"Search"}),s.a.createElement("hr",null),s.a.createElement(k.a,null,this.renderNotesList(this.state.searchNotes))))}},{key:"render",value:function(){return s.a.createElement("div",{className:"Home"},this.props.isAuthenticated?this.renderNotes():this.renderLander())}}]),t}(n.Component)),A=(a(265),function(){return s.a.createElement("div",{className:"NotFound"},s.a.createElement("h3",null,"Sorry, page not found!"))}),_=a(37),j=a(565),I=a(566),T=a(14),q=a.n(T),M=(a(522),a(48)),F=a(564),P=a(213),D=(a(523),function(e){var t=e.isLoading,a=e.text,n=e.loadingText,l=e.className,r=void 0===l?"":l,c=e.disabled,o=void 0!==c&&c,i=Object(M.a)(e,["isLoading","text","loadingText","className","disabled"]);return s.a.createElement(F.a,Object.assign({className:"LoaderButton ".concat(r),disabled:o||t},i),t&&s.a.createElement(P.a,{glyph:"refresh",className:"spinning"}),t?n:a)}),z=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(_.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(i.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({isLoading:!0}),e.prev=2,e.next=5,T.Auth.signIn(a.state.email,a.state.password);case 5:a.props.userHasAuthenticated(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),alert(e.t0.message),a.setState({isLoading:!1});case 12:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:!1,email:"",password:""},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0}},{key:"render",value:function(){return s.a.createElement("div",{className:"Login"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement(j.a,{controlId:"email",bsSize:"large"},s.a.createElement(I.a,null,"Email"),s.a.createElement(N.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),s.a.createElement(j.a,{controlId:"password",bsSize:"large"},s.a.createElement(I.a,null,"Password"),s.a.createElement(N.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),s.a.createElement(D,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Login",loadingText:"Logging in\u2026"})))}}]),t}(n.Component),U=function(e){var t=e.component,a=e.props,n=Object(M.a)(e,["component","props"]);return s.a.createElement(w.a,Object.assign({},n,{render:function(e){return s.a.createElement(t,Object.assign({},e,a))}}))},H=a(567),R=(a(524),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(_.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(i.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({isLoading:!0}),e.prev=2,e.next=5,T.Auth.signUp({username:a.state.email,password:a.state.password});case 5:n=e.sent,a.setState({newUser:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0.message);case 12:a.setState({isLoading:!1});case 13:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}(),a.handleConfirmationSubmit=function(){var e=Object(i.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({isLoading:!0}),e.prev=2,e.next=5,T.Auth.confirmSignUp(a.state.email,a.state.confirmationCode);case 5:return e.next=7,T.Auth.signIn(a.state.email,a.state.password);case 7:a.props.userHasAuthenticated(!0),a.props.history.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),alert(e.t0.message),a.setState({isLoading:!1});case 15:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:!1,email:"",password:"",confirmPassword:"",confirmationCode:"",newUser:null},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0&&this.state.password===this.state.confirmPassword}},{key:"validateConfirmationForm",value:function(){return this.state.confirmationCode.length>0}},{key:"renderConfirmationForm",value:function(){return s.a.createElement("form",{onSubmit:this.handleConfirmationSubmit},s.a.createElement(j.a,{controlId:"confirmationCode",bsSize:"large"},s.a.createElement(I.a,null,"Confirmation Code"),s.a.createElement(N.a,{autoFocus:!0,type:"tel",value:this.state.confirmationCode,onChange:this.handleChange}),s.a.createElement(H.a,null,"Please check your email for the code.")),s.a.createElement(D,{block:!0,bsSize:"large",disabled:!this.validateConfirmationForm(),type:"submit",isLoading:this.state.isLoading,text:"Verify",loadingText:"Verifying\u2026"}))}},{key:"renderForm",value:function(){return s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement(j.a,{controlId:"email",bsSize:"large"},s.a.createElement(I.a,null,"Email"),s.a.createElement(N.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),s.a.createElement(j.a,{controlId:"password",bsSize:"large"},s.a.createElement(I.a,null,"Password"),s.a.createElement(N.a,{value:this.state.password,onChange:this.handleChange,type:"password"}),s.a.createElement("sub",null,"Passwords require a capital letter, number and symbol")),s.a.createElement(j.a,{controlId:"confirmPassword",bsSize:"large"},s.a.createElement(I.a,null,"Confirm Password"),s.a.createElement(N.a,{value:this.state.confirmPassword,onChange:this.handleChange,type:"password"})),s.a.createElement(D,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Signup",loadingText:"Signing up\u2026"}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"Signup"},null===this.state.newUser?this.renderForm():this.renderConfirmationForm())}}]),t}(n.Component)),B=a(214),G=a.n(B),X=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={notes:[],searchNotes:[],search:""},a.onChange=function(e){var t=a.state.notes.filter(function(t){if(t.lang1_title.search(new RegExp(e.target.value,"i"))>=0)return!0});a.setState({search:e.target.value,searchNotes:t})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(0!==this.props.context.notes.length){var t=this.props.context.notes.filter(function(t){return t.sequence===e.props.match.params.id});t.sort(function(e,t){return e.noteNumber>t.noteNumber?1:t.noteNumber>e.noteNumber?-1:0}),this.setState({notes:t,searchNotes:t})}else this.props.history.push("/")}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"notes"},s.a.createElement(x.a,null,"Slides for ",this.props.match.params.id),s.a.createElement(N.a,{onChange:this.onChange,value:this.state.search,componentClass:"input",placeholder:"Search"}),s.a.createElement("hr",null),s.a.createElement(L.LinkContainer,{key:"new",to:"/notes/new?sequence=".concat(this.props.match.params.id)},s.a.createElement(S.a,null,s.a.createElement("h4",null,s.a.createElement("b",null,"\uff0b")," Create a new slide"))),s.a.createElement(k.a,null,this.state.searchNotes.map(function(t,a){return s.a.createElement(L.LinkContainer,{key:a,to:"/sequences/".concat(e.props.match.params.id,"/").concat(t.noteNumber)},s.a.createElement(S.a,{header:"".concat(t.lang1_title," - #").concat(t.noteNumber)},"Created ",G()(Date.now(),t.createdAt)," ago"))})))}}]),t}(n.Component),Z=a(92),Y={MAX_ATTACHMENT_SIZE:5e7,s3:{REGION:"ap-southeast-2",BUCKET:"utell-app-uploads"},apiGateway:{REGION:"us-east-2",URL:"https://19j0wn30ae.execute-api.us-east-2.amazonaws.com/prod"},cognito:{REGION:"us-east-2",USER_POOL_ID:"us-east-2_STuTpymta",APP_CLIENT_ID:"4djq72sr1h9fn2bdmkbnd7u0bv",IDENTITY_POOL_ID:"us-east-2:f07240e2-5c9e-47c0-af6d-40674e40a637"}};function V(e){return K.apply(this,arguments)}function K(){return(K=Object(i.a)(o.a.mark(function e(t){var a,n,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.Auth.currentAuthenticatedUser();case 2:return a=e.sent,n="".concat(a.attributes.sub,":").concat(Date.now(),"-").concat(t.name),e.next=6,T.Storage.put(n,t,{contentType:t.type});case 6:return s=e.sent,e.abrupt("return",s.key);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}var W=function(e){return s.a.createElement("div",{style:{width:"250px"}},s.a.createElement("label",{className:"switch-light switch-candy",onClick:e.changeLang},s.a.createElement("input",{type:"checkbox"}),s.a.createElement("span",null,s.a.createElement("span",null,e.lang1),s.a.createElement("span",null,e.lang2),s.a.createElement("a",null))))},$=(a(541),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(_.a)({},e.target.name,e.target.value))},a.handleFileChange1=function(e){a.file1=e.target.files[0]},a.handleFileChange2=function(e){a.file2=e.target.files[0]},a.handleSubmit=function(){var e=Object(i.a)(o.a.mark(function e(t){var n,s,l,r,c,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(a.file1&&a.file1.size>Y.MAX_ATTACHMENT_SIZE)){e.next=4;break}return alert("Please pick a file smaller than ".concat(Y.MAX_ATTACHMENT_SIZE/1e6," MB for attachment 1.")),e.abrupt("return");case 4:if(!(a.file2&&a.file2.size>Y.MAX_ATTACHMENT_SIZE)){e.next=7;break}return alert("Please pick a file smaller than ".concat(Y.MAX_ATTACHMENT_SIZE/1e6," MB for attachment 2.")),e.abrupt("return");case 7:if(a.setState({isLoading:!0}),e.prev=8,!a.file1){e.next=15;break}return e.next=12,V(a.file1);case 12:e.t0=e.sent,e.next=16;break;case 15:e.t0=null;case 16:if(n=e.t0,!a.file2){e.next=23;break}return e.next=20,V(a.file2);case 20:e.t1=e.sent,e.next=24;break;case 23:e.t1=null;case 24:return s=e.t1,l=a.props.context.notes,-1!==(r=l.map(function(e){return e.sequence})).indexOf(a.state.sequence)?(i=r.filter(function(e){return e===a.state.sequence}).length,c={attachment1:n,attachment2:s,sequence:a.state.sequence,lang1_content:a.state.lang1_content,lang1_title:a.state.lang1_title,lang2_content:a.state.lang2_content,lang2_title:a.state.lang2_title,lang1:a.state.lang1,lang2:a.state.lang2,noteNumber:i+1}):c={attachment1:n,attachment2:s,sequence:a.state.sequence,lang1_content:a.state.lang1_content,lang1_title:a.state.lang1_title,lang2_content:a.state.lang2_content,lang2_title:a.state.lang2_title,lang1:a.state.lang1,lang2:a.state.lang2,noteNumber:1},e.next=30,a.createNote(c);case 30:return e.next=32,a.props.context.getNotes();case 32:a.setState({isLoading:!1}),a.props.history.push("/sequences/".concat(a.state.sequence,"/").concat(c.noteNumber,"?new=true")),e.next=41;break;case 36:e.prev=36,e.t2=e.catch(8),alert(e.t2),console.log(e.t2.response),a.setState({isLoading:!1});case 41:case"end":return e.stop()}},e,null,[[8,36]])}));return function(t){return e.apply(this,arguments)}}(),a.openModal=function(e){e.preventDefault(),a.setState({showLanguageModal:!0})},a.changeLang=function(e){var t=e.target.textContent;t.length>0&&a.setState({selectedLanguage:a.state.lang1===t?"lang1":"lang2"})},a.file1=null,a.file2=null,a.state={isLoading:null,sequence:"",lang1_title:"",lang1_content:"",lang2_title:"",lang2_content:"",slidenum:"",lang1:"English",lang2:"Language2",showLanguageModal:!1,selectedLanguage:"lang1",showFileInput1:!1,showFileInput2:!1},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.context.getNotes(),this.props.location.search&&this.setState({sequence:this.props.location.search.split("=")[1]})}},{key:"validateForm",value:function(){return this.state.lang1_title.length>0&&this.state.sequence.length>0}},{key:"createNote",value:function(e){return T.API.post("notes","/notes",{body:e})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Z.a,{open:this.state.showLanguageModal,onClose:function(){return e.setState({showLanguageModal:!1})},center:!0},s.a.createElement("label",null,"Language 1: "),s.a.createElement("input",{onChange:this.handleChange,name:"lang1",className:"form-control",value:this.state.lang1}),s.a.createElement("hr",null),s.a.createElement("label",null,"Language 2: "),s.a.createElement("input",{onChange:this.handleChange,className:"form-control",name:"lang2",value:this.state.lang2}),s.a.createElement("br",null),s.a.createElement("button",{onClick:function(){return e.setState({showLanguageModal:!1})},className:"btn btn-primary"},"Save"),s.a.createElement("br",null),s.a.createElement("small",null,"Note: re-toggle slider to activate new languages.")),s.a.createElement("div",{className:"NewNote"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},s.a.createElement("div",null,s.a.createElement("h3",null,"Sequence Title")),s.a.createElement("div",{className:"text-center"},s.a.createElement(W,{lang1:this.state.lang1,lang2:this.state.lang2,changeLang:this.changeLang}),s.a.createElement("button",{onClick:this.openModal,className:"btn"},"Edit languages"))),s.a.createElement(j.a,null,s.a.createElement(N.a,{name:"sequence",onChange:this.handleChange,value:this.state.sequence,componentClass:"textarea",placeholder:"Name of the sequence. This slide will be added to a sequence with this name."})),s.a.createElement("div",null,s.a.createElement("h3",null,"Slide Title")),s.a.createElement(j.a,null,s.a.createElement(N.a,{name:this.state.selectedLanguage+"_title",onChange:this.handleChange,value:null===this.state[this.state.selectedLanguage+"_title"]?"":this.state[this.state.selectedLanguage+"_title"],componentClass:"textarea",placeholder:"Name of the slide."})),s.a.createElement("div",null,s.a.createElement("h3",null,"Slide Content")),s.a.createElement(j.a,null,s.a.createElement(N.a,{name:this.state.selectedLanguage+"_content",onChange:this.handleChange,value:null===this.state[this.state.selectedLanguage+"_content"]?"":this.state[this.state.selectedLanguage+"_content"],componentClass:"textarea",rows:"6",placeholder:"Content of the slide."})),s.a.createElement("hr",null),this.state.showFileInput1?s.a.createElement(j.a,{controlId:"file1"},s.a.createElement(I.a,null,"Slide Attachment 1"),s.a.createElement(N.a,{onChange:this.handleFileChange1,type:"file"})):s.a.createElement(F.a,{bsStyle:"primary",onClick:function(){return e.setState({showFileInput1:!0})}},"Add attachment 1"),s.a.createElement("br",null),s.a.createElement("br",null),this.state.showFileInput2?s.a.createElement(j.a,{controlId:"file2"},s.a.createElement(I.a,null,"Slide Attachment 2"),s.a.createElement(N.a,{onChange:this.handleFileChange2,type:"file"})):s.a.createElement(F.a,{bsStyle:"primary",onClick:function(){return e.setState({showFileInput2:!0})}},"Add attachment 2"),s.a.createElement("hr",null),s.a.createElement(D,{block:!0,bsStyle:"primary",bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Create",loadingText:"Creating\u2026"}))))}}]),t}(n.Component)),J=(a(542),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(_.a)({},e.target.id,e.target.value))},a.handleFileChange=function(e){a.file=e.target.files[0]},a.handleSubmit=function(){var e=Object(i.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(a.file&&a.file.size>Y.MAX_ATTACHMENT_SIZE)){e.next=4;break}return alert("Please pick a file smaller than ".concat(Y.MAX_ATTACHMENT_SIZE/1e6," MB.")),e.abrupt("return");case 4:if(a.setState({isLoading:!0}),e.prev=5,!a.file){e.next=10;break}return e.next=9,V(a.file);case 9:n=e.sent;case 10:return e.next=12,a.saveNote({sequence:a.state.sequence,slidenum:a.state.slidenum,content:a.state.content,title:a.state.title,attachment:n||a.state.note.attachment});case 12:a.props.history.push("/"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),alert(e.t0),a.setState({isLoading:!1});case 19:case"end":return e.stop()}},e,null,[[5,15]])}));return function(t){return e.apply(this,arguments)}}(),a.handleDelete=function(){var e=Object(i.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),window.confirm("Are you sure you want to delete this slide?")){e.next=4;break}return e.abrupt("return");case 4:return a.setState({isDeleting:!0}),e.prev=5,e.next=8,a.deleteNote();case 8:a.props.history.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),alert(e.t0),a.setState({isDeleting:!1});case 15:case"end":return e.stop()}},e,null,[[5,11]])}));return function(t){return e.apply(this,arguments)}}(),a.file=null,a.state={isLoading:null,isDeleting:null,note:null,content:"",title:"",attachmentURL:null,sequence:"",slidenum:""},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,a,n,s,l,r,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getNote();case 3:if(a=e.sent,n=a.sequence,s=a.slidenum,l=a.title,r=a.content,!(c=a.attachment)){e.next=9;break}return e.next=8,T.Storage.get(c);case 8:t=e.sent;case 9:this.setState({sequence:n,slidenum:s,note:a,title:l,content:r,attachmentURL:t}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert(e.t0);case 15:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"getNote",value:function(){return T.API.get("notes","/notes/".concat(this.props.match.params.id))}},{key:"validateForm",value:function(){return this.state.content.length>0}},{key:"formatFilename",value:function(e){return e.replace(/^\w+-/,"")}},{key:"saveNote",value:function(e){return T.API.put("notes","/notes/".concat(this.props.match.params.id),{body:e})}},{key:"deleteNote",value:function(){return T.API.del("notes","/notes/".concat(this.props.match.params.id))}},{key:"render",value:function(){return s.a.createElement("div",{className:"Notes"},this.state.note&&s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement(j.a,{controlId:"sequence"},s.a.createElement(N.a,{onChange:this.handleChange,value:this.state.sequence,componentClass:"textarea"})),s.a.createElement(j.a,{controlId:"title"},s.a.createElement(N.a,{onChange:this.handleChange,value:this.state.title,componentClass:"textarea"})),s.a.createElement(j.a,{controlId:"content"},s.a.createElement(N.a,{onChange:this.handleChange,value:this.state.content,componentClass:"textarea"})),this.state.note.attachment&&s.a.createElement(j.a,null,s.a.createElement(I.a,null,"Attachment"),s.a.createElement(N.a.Static,null,s.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:this.state.attachmentURL},this.formatFilename(this.state.note.attachment)))),s.a.createElement(j.a,{controlId:"file"},!this.state.note.attachment&&s.a.createElement(I.a,null,"Attachment"),s.a.createElement(N.a,{onChange:this.handleFileChange,type:"file"})),s.a.createElement(D,{block:!0,bsStyle:"primary",bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Save",loadingText:"Saving\u2026"}),s.a.createElement(D,{block:!0,bsStyle:"danger",bsSize:"large",isLoading:this.state.isDeleting,onClick:this.handleDelete,text:"Delete",loadingText:"Deleting\u2026"})))}}]),t}(n.Component)),Q=a(120),ee=a.n(Q),te=a(572),ae=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={note:{},isLoading:!1,sequence:"",lang1_title:"",lang2_title:"",lang1_content:"",lang2_content:"",lang1:"",lang2:"",maxNumber:null,showLanguageModal:!1,selectedLanguage:"lang1",sub:"",showFileInput1:!1,showFileInput2:!1},a.findAndGetNote=function(){var e=a.props.context.notes.find(function(e){return e.sequence===a.props.match.params.sequenceId&&e.noteNumber===Number(a.props.match.params.noteNumber)});if(e){var t=a.props.context.notes.filter(function(e){return e.sequence===a.props.match.params.sequenceId}).map(function(e){return e.noteNumber}),n=Math.max.apply(null,t);a.setState({note:e,sequence:e.sequence,lang1_title:e.lang1_title,lang2_title:e.lang2_title,lang1_content:e.lang1_content,lang2_content:e.lang2_content,lang1:e.lang1,lang2:e.lang2,maxNumber:n})}else a.props.history.push("/")},a.changeLang=function(e){var t=e.target.textContent;t.length>0&&a.setState({selectedLanguage:a.state.lang1===t?"lang1":"lang2"})},a.handleChange=function(e){a.setState(Object(_.a)({},e.target.name,e.target.value))},a.handleFileChange1=function(e){a.file1=e.target.files[0]},a.handleFileChange2=function(e){a.file2=e.target.files[0]},a.openModal=function(e){e.preventDefault(),a.setState({showLanguageModal:!0})},a.handleSubmit=function(){var e=Object(i.a)(o.a.mark(function e(t){var n,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.setState({isLoading:!0}),!(a.file1&&a.file1.size>Y.MAX_ATTACHMENT_SIZE)){e.next=5;break}return alert("Please pick a file smaller than ".concat(Y.MAX_ATTACHMENT_SIZE/1e6," MB for attachment.")),e.abrupt("return");case 5:if(!(a.file2&&a.file2.size>Y.MAX_ATTACHMENT_SIZE)){e.next=8;break}return alert("Please pick a file smaller than ".concat(Y.MAX_ATTACHMENT_SIZE/1e6," MB for attachment 2.")),e.abrupt("return");case 8:if(e.prev=8,!a.file1){e.next=15;break}return e.next=12,V(a.file1);case 12:e.t0=e.sent,e.next=16;break;case 15:e.t0=a.state.note.attachment1?a.state.note.attachment1:null;case 16:if(n=e.t0,!a.file2){e.next=23;break}return e.next=20,V(a.file2);case 20:e.t1=e.sent,e.next=24;break;case 23:e.t1=a.state.note.attachment2?a.state.note.attachment2:null;case 24:return s=e.t1,e.next=27,T.API.del("notes","/notes/".concat(a.state.note.noteId));case 27:return e.next=29,T.API.post("notes","/notes",{body:{attachment1:n,attachment2:s,sequence:a.state.sequence,lang1_content:a.state.lang1_content,lang1_title:a.state.lang1_title,lang2_content:a.state.lang2_content,lang2_title:a.state.lang2_title,lang1:a.state.lang1,lang2:a.state.lang2,noteNumber:a.state.note.noteNumber}});case 29:return e.next=31,a.props.context.getNotes();case 31:a.setState({isLoading:!1}),e.next=39;break;case 34:e.prev=34,e.t2=e.catch(8),alert(e.t2),console.log(e.t2.response),a.setState({isLoading:!1});case 39:case"end":return e.stop()}},e,null,[[8,34]])}));return function(t){return e.apply(this,arguments)}}(),a.onDeleteNote=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this note?")){e.next=12;break}return e.prev=2,e.next=5,T.API.del("notes","/notes/".concat(a.state.note.noteId));case 5:console.log("-> Deleted note."),a.props.history.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])})),a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;0!==this.props.context.notes.length?(this.findAndGetNote(),T.Auth.currentAuthenticatedUser(function(t){e.setState({sub:t.attributes.sub})})):this.props.history.push("/")}},{key:"componentDidUpdate",value:function(e){this.props.match.params!==e.match.params&&this.findAndGetNote()}},{key:"validateForm",value:function(){return this.state.lang1_title.length>0&&this.state.sequence.length>0}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Z.a,{open:this.state.showLanguageModal,onClose:function(){return e.setState({showLanguageModal:!1})},center:!0},s.a.createElement("label",null,"Language 1: "),s.a.createElement("input",{onChange:this.handleChange,name:"lang1",className:"form-control",value:this.state.lang1}),s.a.createElement("hr",null),s.a.createElement("label",null,"Language 2: "),s.a.createElement("input",{onChange:this.handleChange,className:"form-control",name:"lang2",value:this.state.lang2}),s.a.createElement("br",null),s.a.createElement("button",{onClick:function(){return e.setState({showLanguageModal:!1})},className:"btn btn-primary"},"Save"),s.a.createElement("br",null),s.a.createElement("small",null,"Note: re-toggle slider to activate new languages.")),s.a.createElement("div",null,"?new=true"===this.props.location.search&&s.a.createElement(te.a,{variant:"primary"},"Note has been created!"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},s.a.createElement("div",null,s.a.createElement("h3",null,"Sequence Title")),s.a.createElement("div",{className:"text-center"},s.a.createElement(W,{lang1:this.state.lang1,lang2:this.state.lang2,changeLang:this.changeLang}),s.a.createElement("button",{onClick:this.openModal,className:"btn"},"Change languages"))),s.a.createElement(j.a,null,s.a.createElement(N.a,{onChange:this.handleChange,value:this.state.sequence,name:"sequence",componentClass:"textarea",placeholder:"Name of the sequence. This slide will be added to a sequence with this name."})),s.a.createElement("div",null,s.a.createElement("h3",null,"Slide Title")),s.a.createElement(j.a,null,s.a.createElement(N.a,{name:this.state.selectedLanguage+"_title",onChange:this.handleChange,value:null===this.state[this.state.selectedLanguage+"_title"]?"":this.state[this.state.selectedLanguage+"_title"],componentClass:"textarea",placeholder:"Name of the slide."})),s.a.createElement("div",null,s.a.createElement("h3",null,"Slide Content")),s.a.createElement(j.a,null,s.a.createElement(N.a,{name:this.state.selectedLanguage+"_content",onChange:this.handleChange,value:null===this.state[this.state.selectedLanguage+"_content"]?"":this.state[this.state.selectedLanguage+"_content"],componentClass:"textarea",rows:"6",placeholder:"Content of the slide."})),this.state.showFileInput1?s.a.createElement(j.a,{controlId:"file1"},s.a.createElement(I.a,null,"Slide Attachment 1"),s.a.createElement(N.a,{onChange:this.handleFileChange1,type:"file"})):s.a.createElement(F.a,{bsStyle:"primary",onClick:function(){return e.setState({showFileInput1:!0})}},"Add attachment 1"),s.a.createElement("br",null),s.a.createElement("br",null),this.state.showFileInput2?s.a.createElement(j.a,{controlId:"file2"},s.a.createElement(I.a,null,"Slide Attachment 2"),s.a.createElement(N.a,{onChange:this.handleFileChange2,type:"file"})):s.a.createElement(F.a,{bsStyle:"primary",onClick:function(){return e.setState({showFileInput2:!0})}},"Add attachment 2"),s.a.createElement("hr",null),!this.state.note.attachment1||"mov"!==this.state.note.attachment1.split(".").pop()&&"MOV"!==this.state.note.attachment1.split(".").pop()?this.state.note.attachment1&&s.a.createElement("div",null,s.a.createElement(ee.a,{fileType:this.state.note.attachment1&&this.state.note.attachment1.split(".").pop(),filePath:this.state.note.attachment1&&"https://utell-app-uploads.s3-ap-southeast-2.amazonaws.com/public/".concat(this.state.note.attachment1)})):s.a.createElement("div",{className:"mov-container text-center"},s.a.createElement("video",{controls:"controls",width:"600",height:"400",src:"https://utell-app-uploads.s3-ap-southeast-2.amazonaws.com/public/".concat(this.state.note.attachment1)})),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),!this.state.note.attachment2||"mov"!==this.state.note.attachment2.split(".").pop()&&"MOV"!==this.state.note.attachment2.split(".").pop()?this.state.note.attachment2&&s.a.createElement("div",null,s.a.createElement(ee.a,{fileType:this.state.note.attachment2&&this.state.note.attachment2.split(".").pop(),filePath:this.state.note.attachment2&&"https://utell-app-uploads.s3-ap-southeast-2.amazonaws.com/public/".concat(this.state.note.attachment2)})):s.a.createElement("div",{className:"mov-container text-center"},s.a.createElement("video",{controls:"controls",width:"600",height:"400",src:"https://utell-app-uploads.s3-ap-southeast-2.amazonaws.com/public/".concat(this.state.note.attachment2)})),s.a.createElement("hr",null),s.a.createElement(D,{block:!0,bsStyle:"primary",bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Update Slide",loadingText:"Updating..."})),s.a.createElement(D,{block:!0,bsStyle:"danger",bsSize:"large",isLoading:this.state.isLoading,text:"Delete Slide",loadingText:"Deleting...",style:{marginTop:"5px"},onClick:this.onDeleteNote}),s.a.createElement("div",null,s.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"5px"}},this.state.note.noteNumber>1?s.a.createElement(d.a,{to:"/sequences/".concat(this.state.note.sequence,"/").concat(this.state.note.noteNumber-1)},s.a.createElement(F.a,{bsStyle:"success",bsSize:"lg"},"Previous")):s.a.createElement(F.a,{bsStyle:"success",bsSize:"lg",disabled:!0},"Previous"),s.a.createElement("p",null,"Slide #",this.state.note.noteNumber),this.state.note.noteNumber!==this.state.maxNumber?s.a.createElement(d.a,{to:"/sequences/".concat(this.state.note.sequence,"/").concat(this.state.note.noteNumber+1)},s.a.createElement(F.a,{bsStyle:"success",bsSize:"lg"},"Next")):s.a.createElement(d.a,{to:"/notes/new?sequence=".concat(this.state.note.sequence)},s.a.createElement(F.a,{bsStyle:"success",bsSize:"lg"},"+ Create a new slide"))))))}}]),t}(n.Component),ne=a(206),se=function(e){var t=e.component,a=e.props,n=Object(M.a)(e,["component","props"]);return s.a.createElement(w.a,Object.assign({},n,{render:function(e){return a.isAuthenticated?s.a.createElement(t,Object.assign({},e,a)):s.a.createElement(ne.a,{to:"/login?redirect=".concat(e.location.pathname).concat(e.location.search)})}}))};var le=function(e){var t=e.component,a=e.props,n=Object(M.a)(e,["component","props"]),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i").exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}("redirect");return s.a.createElement(w.a,Object.assign({},n,{render:function(e){return a.isAuthenticated?s.a.createElement(ne.a,{to:""===l||null===l?"/":l}):s.a.createElement(t,Object.assign({},e,a))}}))},re=s.a.createContext(),ce=function(e){var t=e.childProps;return s.a.createElement(re.Consumer,null,function(e){return s.a.createElement(y.a,null,s.a.createElement(U,{path:"/",exact:!0,component:O,props:Object(C.a)({context:e},t)}),s.a.createElement(le,{path:"/login",exact:!0,component:z,props:t}),s.a.createElement(le,{path:"/signup",exact:!0,component:R,props:t}),s.a.createElement(se,{path:"/sequences/:id",exact:!0,component:X,props:Object(C.a)({context:e},t)}),s.a.createElement(se,{path:"/sequences/:sequenceId/:noteNumber",exact:!0,component:ae,props:Object(C.a)({context:e},t)}),s.a.createElement(se,{path:"/notes/new",exact:!0,component:$,props:Object(C.a)({context:e},t)}),s.a.createElement(se,{path:"/notes/:id",exact:!0,component:J,props:t}),s.a.createElement(w.a,{component:A}))})},oe=(a(543),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={notes:[],loading:!1},a.getNotes=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){console.log("-> Getting all notes..."),a.setState({loading:!0}),T.API.get("notes","/notes").then(function(t){a.setState({notes:t,loading:!1},function(){return e(t)})}).catch(function(e){alert(e),a.setState({loading:!1},function(){return t(e)})})}));case 1:case"end":return e.stop()}},e)})),a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return s.a.createElement(re.Provider,{value:{notes:this.state.notes,loading:this.state.loading,getNotes:this.getNotes}},this.props.children)}}]),t}(n.Component)),ie=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).userHasAuthenticated=function(e){a.setState({isAuthenticated:e})},a.handleLogout=function(){var e=Object(i.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.Auth.signOut();case 2:a.userHasAuthenticated(!1),a.props.history.push("/login");case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={isAuthenticated:!1,isAuthenticating:!0},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.Auth.currentSession();case 3:this.userHasAuthenticated(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),"No current user"!==e.t0&&alert(e.t0);case 9:this.setState({isAuthenticating:!1});case 10:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a=this.props.history.location.pathname.split("/");a.length-1===3?(e=a[2],t="/sequences/".concat(a[2])):(e="Your Sequences",t="/");var l={isAuthenticated:this.state.isAuthenticated,userHasAuthenticated:this.userHasAuthenticated};return!this.state.isAuthenticating&&s.a.createElement(oe,null,s.a.createElement("div",{className:"App container"},s.a.createElement(E.a,{fluid:!0,collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},s.a.createElement(E.a.Header,null,s.a.createElement(E.a.Brand,null,s.a.createElement(d.a,{to:"/"},"Utell")),s.a.createElement(E.a.Toggle,null)),s.a.createElement(E.a.Collapse,null,s.a.createElement(b.a,{className:"mr-auto"},s.a.createElement(E.a.Brand,null,s.a.createElement(d.a,{to:t},e))),s.a.createElement(b.a,{pullRight:!0},this.state.isAuthenticated?s.a.createElement(v.a,{onClick:this.handleLogout},"Logout"):s.a.createElement(n.Fragment,null,s.a.createElement(L.LinkContainer,{to:"/signup"},s.a.createElement(v.a,null,"Signup")),s.a.createElement(L.LinkContainer,{to:"/login"},s.a.createElement(v.a,null,"Login")))))),s.a.createElement(ce,{childProps:l})))}}]),t}(n.Component),ue=Object(f.a)(ie);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var he=a(124);q.a.configure({Auth:{mandatorySignIn:!0,region:Y.cognito.REGION,userPoolId:Y.cognito.USER_POOL_ID,identityPoolId:Y.cognito.IDENTITY_POOL_ID,userPoolWebClientId:Y.cognito.APP_CLIENT_ID},Storage:{region:Y.s3.REGION,bucket:Y.s3.BUCKET,identityPoolId:Y.cognito.IDENTITY_POOL_ID},API:{endpoints:[{name:"notes",endpoint:Y.apiGateway.URL,region:Y.apiGateway.REGION}]}}),r.a.render(s.a.createElement(he.a,null,s.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[221,1,2]]]);
//# sourceMappingURL=main.c88490ec.chunk.js.map